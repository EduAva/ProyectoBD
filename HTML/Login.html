<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../CSS/Login.css"> 
    <title>Iniciar Sesión</title>
</head>
<body>
    
    <nav class="barra-nav">
        <ul class="barra-link">
            <li><a href="../HTML/Pagina-Principal.html" class="barra-link-estilo">Inicio</a></li>
            <li><a href="Registro-Mascota.html" class="barra-link-estilo">Registro de Mascotas</a></li>
            <li><a href="Servicios.html" class="barra-link-estilo" >Servicios</a></li>
            <li><a href="contacto.html" class="barra-link-estilo">Contáctanos</a></li>
            <li><a href="Login.html" class="barra-link-estilo" style="background-color: #F9A66C; color: white;">Login</a></li>
            <li><a href="user.php" class="barra-link-estilo" >Mi Cuenta</a></li>
        </ul>
    </nav>

    <div class="contenedor-centrado">
        <div class="login-caja">
            <h1>Iniciar Sesión</h1>
            <form id="loginForm">
                <div class="input-group">
                    <label for="email">Ingresa Correo</label>
                    <input type="email" id="email" name="email" placeholder="ejemplo@correo.com" required class="email">
                </div>
                
                <div class="input-group">
                    <label for="password">Ingresa tu Contraseña</label>
                    <input type="password" id="password" name="password" placeholder="••••••••" required>
                    <div id="mensaje-error" style="color: red; margin-top: 10px; display: none; font-size: 0.9em; font-weight: bold;"></div>
                </div>

                <button type="submit" id="btn-submit">Entrar</button>
                
                <div class="registro-link">
                    <p>¿No tienes cuenta?</p>
                    <a href="register.html">Regístrate aquí</a>
                </div>
            </form>
        </div>
    </div>

    <script>
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault(); // Evita que la página se recargue sola

            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const errorDiv = document.getElementById('mensaje-error');
            const btn = document.getElementById('btn-submit');

            // Feedback visual: Desactivar botón mientras carga
            btn.disabled = true;
            btn.innerText = "Verificando...";
            errorDiv.style.display = 'none';

            // Crear los datos para enviar
            const formData = new FormData();
            formData.append('email', email);
            formData.append('password', password);

            // TU URL DE RENDER AQUÍ:
            fetch('https://proyectobd-80ms.onrender.com/index.php', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // SI EL LOGIN ES CORRECTO:
                    alert('¡Bienvenido!'); // Opcional
                    // Redirige a donde quieras (ej. user.php o index.html)
                    window.location.href = 'user.php'; 
                } else {
                    // SI HAY ERROR (Contraseña mal, usuario no existe, etc):
                    errorDiv.textContent = data.message;
                    errorDiv.style.display = 'block';
                    btn.disabled = false;
                    btn.innerText = "Entrar";
                }
            })
            .catch(error => {
                console.error('Error:', error);
                errorDiv.textContent = "Error al conectar con el servidor.";
                errorDiv.style.display = 'block';
                btn.disabled = false;
                btn.innerText = "Entrar";
            });
        });
    </script>
</body>
</html>
